# Simple values.yaml for combined Weaviate + Hypha Services deployment
# All components run in a single pod for localhost connectivity

# Global settings
global:
  name: hypha-weaviate-stack

# Deployment configuration
deployment:
  replicas: 1

  # Container images
  weaviate:
    image: cr.weaviate.io/semitechnologies/weaviate:1.29.0

  services:
    image: ghcr.io/aicell-lab/hypha-startup-services:latest

# Storage configuration
storage:
  size: 50Gi
  # storageClass: ""  # Use default storage class

# Service configuration
service:
  # Weaviate HTTP port
  port: 8080
  # Weaviate gRPC port
  grpcPort: 50051

# Hypha service configuration
hypha:
  serverUrl: "https://hypha.aicell.io"
  services:
    weaviate:
      id: "weaviate-production"
    mem0:
      id: "mem0-production"

# Weaviate configuration
weaviate:
  # Vectorizer and modules
  vectorizer: "text2vec-ollama"
  modules: "text2vec-ollama,generative-ollama,backup-s3,offload-s3"

  # S3 backup configuration
  backup:
    bucket: "hypha-weaviate-backups"
    endpoint: "s3.cloud.kth.se"

  # S3 offload configuration
  offload:
    bucket: "hypha-weaviate-offload"
    endpoint: "s3.cloud.kth.se"

# Resource limits
resources:
  weaviate:
    requests:
      cpu: 500m
      memory: 1Gi
    limits:
      cpu: 2000m
      memory: 4Gi

  services:
    requests:
      cpu: 200m
      memory: 256Mi
    limits:
      cpu: 1000m
      memory: 1Gi

# Security configuration
security:
  # Image pull secrets
  imagePullSecrets:
    - name: ghcr-secret

  # Kubernetes secrets for credentials
  secrets:
    hypha: aria-agents-secrets
    aws: hypha-secrets

# Ingress (optional)
ingress:
  enabled: false
  host: weaviate.local
  className: ""

# Monitoring endpoints for health checks
monitoring:
  weaviate:
    readyPath: "/v1/.well-known/ready"
    livePath: "/v1/.well-known/live"
